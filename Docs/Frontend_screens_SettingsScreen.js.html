<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Frontend/screens/SettingsScreen.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/NaveFlactem/BlitzBuyr" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="FlipCard.html">FlipCard</a></li></ul><h3>Modules</h3><ul><li><a href="module-API_Accounts.html">API/Accounts</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-API_Accounts.html#~authenticateUser">authenticateUser</a></li><li data-type='method' style='display: none;'><a href="module-API_Accounts.html#~getAccounts">getAccounts</a></li><li data-type='method' style='display: none;'><a href="module-API_Accounts.html#~handleDeleteAccounts">handleDeleteAccounts</a></li><li data-type='method' style='display: none;'><a href="module-API_Accounts.html#~handleLoginRequest">handleLoginRequest</a></li><li data-type='method' style='display: none;'><a href="module-API_Accounts.html#~handleRegistrationRequest">handleRegistrationRequest</a></li></ul></li><li><a href="module-API_Listings.html">API/Listings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~createListing">createListing</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~encodeImageToBlurhash">encodeImageToBlurhash</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~getImages">getImages</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~getListings">getListings</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~handleDeleteImages">handleDeleteImages</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~handleDeleteListing">handleDeleteListing</a></li><li data-type='method' style='display: none;'><a href="module-API_Listings.html#~handleDeleteListings">handleDeleteListings</a></li></ul></li><li><a href="module-API_Profile.html">API/Profile</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~deleteAllLikes">deleteAllLikes</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~deleteRating">deleteRating</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~getLikes">getLikes</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~getProfilePicture">getProfilePicture</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~getRatings">getRatings</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~getUserProfile">getUserProfile</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~handleLike">handleLike</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~handleUnlike">handleUnlike</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~rateUser">rateUser</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~updateContactInfo">updateContactInfo</a></li><li data-type='method' style='display: none;'><a href="module-API_Profile.html#~updateProfile">updateProfile</a></li></ul></li><li><a href="module-Database.html">Database</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Database.html#~areTableDefinitionsEqual">areTableDefinitionsEqual</a></li><li data-type='method' style='display: none;'><a href="module-Database.html#~createOrUpdateTable">createOrUpdateTable</a></li><li data-type='method' style='display: none;'><a href="module-Database.html#~createTables">createTables</a></li><li data-type='method' style='display: none;'><a href="module-Database.html#~extractColumnsFromDefinition">extractColumnsFromDefinition</a></li></ul></li><li><a href="module-Server.html">Server</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Server.html#~getRoot">getRoot</a></li><li data-type='method' style='display: none;'><a href="module-Server.html#~requestLogger">requestLogger</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="AboutUs.html">AboutUs</a></li><li><a href="Authenticate.html">Authenticate</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Authenticate.html#.AuthenticateScreen">AuthenticateScreen</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.checkStoredCredentials">checkStoredCredentials</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.clearStoredCredentials">clearStoredCredentials</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.getStoredPassword">getStoredPassword</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.getStoredUsername">getStoredUsername</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.loadSettings">loadSettings</a></li><li data-type='method' style='display: none;'><a href="Authenticate.html#.setStoredCredentials">setStoredCredentials</a></li></ul></li><li><a href="ChangePassword.html">ChangePassword</a></li><li><a href="Components.html">Components</a><ul class='members'><li data-type='member' style='display: none;'><a href="Components.html#.TagDrawer">TagDrawer</a></li><li data-type='member' style='display: none;'><a href="Components.html#.onGestureEvent">onGestureEvent</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="Components.html#.NoWifi">NoWifi</a></li><li data-type='method' style='display: none;'><a href="Components.html#.TopBar">TopBar</a></li><li data-type='method' style='display: none;'><a href="Components.html#.handleConditionPress">handleConditionPress</a></li><li data-type='method' style='display: none;'><a href="Components.html#.handleCurrencyPress">handleCurrencyPress</a></li><li data-type='method' style='display: none;'><a href="Components.html#.handleTagPress">handleTagPress</a></li><li data-type='method' style='display: none;'><a href="Components.html#.handleTransactionPress">handleTransactionPress</a></li></ul></li><li><a href="CreateAccount.html">CreateAccount</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CreateAccount.html#.CreateAccountScreen">CreateAccountScreen</a></li><li data-type='method' style='display: none;'><a href="CreateAccount.html#.handleCreateAccount">handleCreateAccount</a></li><li data-type='method' style='display: none;'><a href="CreateAccount.html#.handlePasswordChange">handlePasswordChange</a></li></ul></li><li><a href="EditContactInfo.html">EditContactInfo</a><ul class='methods'><li data-type='method' style='display: none;'><a href="EditContactInfo.html#.EditContactInfo">EditContactInfo</a></li><li data-type='method' style='display: none;'><a href="EditContactInfo.html#.handleInputChange">handleInputChange</a></li></ul></li><li><a href="Hooks.html">Hooks</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Hooks.html#.useBackButtonHandler">useBackButtonHandler</a></li><li data-type='method' style='display: none;'><a href="Hooks.html#.useLocation">useLocation</a></li></ul></li><li><a href="Listing.html">Listing</a><ul class='members'><li data-type='member' style='display: none;'><a href="Listing.html#.animatedStyle">animatedStyle</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.focalX">focalX</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.focalY">focalY</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.scaleCurrent">scaleCurrent</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.scalePrevious">scalePrevious</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.xCurrent">xCurrent</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.xPrevious">xPrevious</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.yCurrent">yCurrent</a></li><li data-type='member' style='display: none;'><a href="Listing.html#.yPrevious">yPrevious</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="Listing.html#.CardOverlay">CardOverlay</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.CustomItem">CustomItem</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.DeleteButton">DeleteButton</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.LikeButton">LikeButton</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.Listing">Listing</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.MemoizedImage">MemoizedImage</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.TimeBox">TimeBox</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.getDistance">getDistance</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.onActive">onActive</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.onEnd">onEnd</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.onStart">onStart</a></li><li data-type='method' style='display: none;'><a href="Listing.html#.pinchHandler">pinchHandler</a></li></ul></li><li><a href="Login.html">Login</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Login.html#.LoginScreen">LoginScreen</a></li><li data-type='method' style='display: none;'><a href="Login.html#.handleCreateAccount">handleCreateAccount</a></li><li data-type='method' style='display: none;'><a href="Login.html#.handleLogin">handleLogin</a></li></ul></li><li><a href="Networking.html">Networking</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Networking.html#.fetchListings">fetchListings</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.handleDeleteAccount">handleDeleteAccount</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.handleDeleteAccount">handleDeleteAccount</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.handleLike">handleLike</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.handleListingCreation">handleListingCreation</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.saveContactInfo">saveContactInfo</a></li><li data-type='method' style='display: none;'><a href="Networking.html#.saveProfileInfo">saveProfileInfo</a></li></ul></li><li><a href="Screens.CreateListing.html">Screens.CreateListing</a></li><li><a href="Screens.EditProfile.html">Screens.EditProfile</a></li><li><a href="Screens.HomeScreen.html">Screens.HomeScreen</a></li><li><a href="Screens.ProfileScreen.html">Screens.ProfileScreen</a></li><li><a href="Screens.RatingScreen.html">Screens.RatingScreen</a></li><li><a href="Screens.SettingsScreen.html">Screens.SettingsScreen</a></li><li><a href="Swipers.html">Swipers</a></li><li><a href="Swipers.AndroidSwiperComponent.html">Swipers.AndroidSwiperComponent</a></li><li><a href="Swpiers.IOSSwiperComponent.html">Swpiers.IOSSwiperComponent</a></li><li><a href="UserSettings.html">UserSettings</a><ul class='methods'><li data-type='method' style='display: none;'><a href="UserSettings.html#.clearUserSettings">clearUserSettings</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.getColorMode">getColorMode</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.getDistance">getDistance</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.getUserSettings">getUserSettings</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.saveUserSettings">saveUserSettings</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.setDefaultUserSettings">setDefaultUserSettings</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.updateColorMode">updateColorMode</a></li><li data-type='method' style='display: none;'><a href="UserSettings.html#.updateDistance">updateDistance</a></li></ul></li><li><a href="Utilities.html">Utilities</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Utilities.html#.calculateTimeSince">calculateTimeSince</a></li><li data-type='method' style='display: none;'><a href="Utilities.html#.getLocationWithRetry">getLocationWithRetry</a></li></ul></li><li><a href="Visuals.html">Visuals</a></li><li><a href="Visuals.BouncePulse.html">Visuals.BouncePulse</a></li><li><a href="Visuals.CustomRefreshControl.html">Visuals.CustomRefreshControl</a></li><li><a href="Visuals.Icons.html">Visuals.Icons</a></li><li><a href="Visuals.ThemeProvider.html">Visuals.ThemeProvider</a></li><li><a href="Visuals.TopBarGeneric.html">Visuals.TopBarGeneric</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CreateListing">CreateListing</a></li><li><a href="global.html#calculateFontSize">calculateFontSize</a></li><li><a href="global.html#calculateFontSizeLocation">calculateFontSizeLocation</a></li><li><a href="global.html#calculateTagTextFontSize">calculateTagTextFontSize</a></li><li><a href="global.html#calculateTransactionFontSize">calculateTransactionFontSize</a></li><li><a href="global.html#getThemedStyles">getThemedStyles</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Frontend/screens/SettingsScreen.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace SettingsScreen
 * @memberof Screens
 *
 *
 */

import React, { useState, memo, useEffect } from 'react';
import {
  View,
  Text,
  TouchableOpacity,
  SafeAreaView,
  ScrollView,
  Switch,
  Platform,
} from 'react-native';
import { MaterialCommunityIcons } from '@expo/vector-icons';
import { AntDesign } from '@expo/vector-icons';
import Colors from '../constants/Colors';
import { getThemedStyles } from '../constants/Styles.js';
import { useThemeContext } from '../components/visuals/ThemeProvider.js';
import * as SecureStore from 'expo-secure-store';
import { screenHeight } from '../constants/ScreenDimensions';

const SettingsScreen = ({ navigation, route }) => {
  const [loading, setLoading] = useState(true);
  const { theme } = useThemeContext();
  const { toggleTheme } = useThemeContext();
  const styles = getThemedStyles(useThemeContext().theme).SettingsScreen;
  const [contactInfo] = useState(route.params?.prevContactInfo);
  const [profileName] = useState(route.params?.profileName);
  const [accountActivityChecked, setAccountActivityChecked] = useState(false);

  const params = {
    'Contact Info': {
      prevContactInfo: contactInfo,
    },
    'Change Password': { profileName: profileName },
  };

  const [switchItemsState, setSwitchItemsState] = useState({
    'Dark Mode': theme === 'light' ? false : true,
    'Account Activity': false,
  });

  const titles = {
    'Account Settings': ['Change Password', 'Contact Info'],
    Notifications: ['Account Activity'],
    General: ['Dark Mode'],
    More: ['About Us'],
  };

  const toggleDarkMode = async () => {
    try {
      await toggleTheme();
      setSwitchItemsState((prevState) => ({
        ...prevState,
        'Dark Mode': theme === 'light',
      }));
    } catch (error) {
      console.error('Error toggling theme:', error);
    }
  };

  const toggleNotifications = async () => {
    const accountActivityStatus = !switchItemsState['Account Activity'];

    try {
      if (!accountActivityStatus) {
        setAccountActivityChecked(false);
        await SecureStore.setItemAsync('accountActivityStatus', 'false');
        setSwitchItemsState((prevState) => ({
          ...prevState,
          'Account Activity': false,
        }));
      } else {
        setAccountActivityChecked(true);
        await SecureStore.setItemAsync('accountActivityStatus', 'true');
        setSwitchItemsState((prevState) => ({
          ...prevState,
          'Account Activity': true,
        }));
      }
    } catch (error) {
      console.error('Error setting secure store:', error);
    }
  };

  const toggleParams = {
    'Dark Mode': toggleDarkMode,
    'Account Activity': toggleNotifications,
  };

  useEffect(() => {
    const loadAccountActivityStatus = async () => {
      try {
        const storedStatus = await SecureStore.getItemAsync(
          'accountActivityStatus',
        );
        const parsedStatus =
          storedStatus !== null ? storedStatus === 'true' : false;
        setSwitchItemsState((prevState) => ({
          ...prevState,
          'Account Activity': parsedStatus,
        }));
      } catch (error) {
        console.error('Error loading account activity status:', error);
      }
    };

    loadAccountActivityStatus();
  }, []);

  return (
    &lt;SafeAreaView style={styles.safeareaview}>
      {/* Top Bar */}
      &lt;View style={styles.topBar}>
        &lt;View style={styles.topBarContainer}>
          &lt;TouchableOpacity
            onPress={() => {
              setLoading(true);
              navigation.navigate('BottomNavOverlay');
            }}
          >
            &lt;View style={styles.iconContainer}>
              &lt;MaterialCommunityIcons
                name="arrow-left"
                size={30}
                color={Colors.BB_bone}
                style={{
                  top:
                    Platform.OS === 'ios'
                      ? 0.035 * screenHeight
                      : 0.055 * screenHeight,
                }}
              />
            &lt;/View>
          &lt;/TouchableOpacity>
          &lt;View
            style={{
              paddingLeft: 10,
              alignContent: 'center',
              alignSelf: 'center',
            }}
          >
            &lt;Text style={styles.headerText}>Settings&lt;/Text>
          &lt;/View>
        &lt;/View>
      &lt;/View>
      &lt;ScrollView
        contentContainerStyle={{ flexGrow: 1 }}
        Account
        Activity
        style={{
          backgroundColor: theme === 'dark' ? Colors.black : Colors.BB_bone,
        }}
      >
        {/* CONTENT */}
        &lt;View style={styles.container}>
          &lt;View style={styles.settingsContent}>
            {/* EACH VIEW IS CREATED FROM EACH KEY IN THE titles DICTIONARY */}
            {Object.entries(titles).map(([section, items]) => (
              &lt;View key={section}>
                &lt;View style={styles.sectionHeaderContainer}>
                  &lt;Text style={styles.header}>{section}&lt;/Text>
                &lt;/View>
                {items.map((item, index) => (
                  &lt;View key={`${section}-${item}`}>
                    {/* IF KEY IS A REDIRECT TO DIFFERENT PAGE */}
                    {!switchItemsState.hasOwnProperty(item) ? (
                      &lt;TouchableOpacity
                        key={item}
                        style={styles.settingsItems}
                        onPress={() => {
                          setLoading(true);
                          console.log(
                            `navigating to => ${item.replace(' ', '')}Screen`,
                          );
                          console.log(`with parameters => ${params[item]}`);
                          navigation.navigate(
                            `${item.replace(' ', '')}Screen`,
                            params[item],
                          );
                        }}
                      >
                        &lt;Text style={styles.itemText}>{item}&lt;/Text>
                        &lt;AntDesign
                          name="right"
                          size={15}
                          color={
                            theme === 'dark'
                              ? Colors.BB_bone
                              : Colors.BB_darkerRedPurple
                          }
                          style={{ right: 25 }}
                        />
                      &lt;/TouchableOpacity>
                    ) : (
                      // IF KEY IS A TOGGLE
                      &lt;View
                        key={item}
                        style={{
                          paddingTop: 20,
                          paddingHorizontal: 5,
                          flexDirection: 'row',
                          justifyContent: 'space-between',
                        }}
                      >
                        &lt;Text
                          style={[styles.itemText, { left: 20, bottom: 6 }]}
                        >
                          {item}
                        &lt;/Text>
                        &lt;Switch
                          trackColor={{
                            false:
                              theme === 'dark' ? Colors.BB_bone : Colors.gray,
                            true: Colors.BB_violet,
                          }}
                          thumbColor={
                            theme === 'dark'
                              ? '#3e3e42'
                              : Colors.BB_darkerRedPurple
                          }
                          onValueChange={() => {
                            setSwitchItemsState((prevState) => ({
                              ...prevState,
                              [item]: !prevState[item],
                            }));
                            toggleParams[item]();
                          }}
                          style={{
                            bottom: 15,
                            right: 10,
                          }}
                          value={switchItemsState[item]}
                        />
                      &lt;/View>
                    )}
                    {/* Thin Horizontal Bar */}
                    {index !== items.length - 1 &amp;&amp; ( //Only appear when it's not the last item in the key.
                      &lt;View style={styles.thinHorizontalBar}>&lt;/View>
                    )}
                  &lt;/View>
                ))}
                &lt;View style={styles.horizontalBar}>&lt;/View>
              &lt;/View>
            ))}
          &lt;/View>
        &lt;/View>
      &lt;/ScrollView>
    &lt;/SafeAreaView>
  );
};

export default SettingsScreen;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Sat Dec 02 2023 14:31:47 GMT-0800 (Pacific Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
